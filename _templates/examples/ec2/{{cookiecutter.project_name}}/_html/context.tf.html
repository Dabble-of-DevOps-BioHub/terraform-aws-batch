<div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># ONLY EDIT THIS FILE IN github.com/cloudposse/terraform-null-label</span>
<span class="c1"># All other instances of this file should be a copy of that one</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Copy this file from https://github.com/cloudposse/terraform-null-label/blob/master/exports/context.tf</span>
<span class="c1"># and then place it in your Terraform module to automatically get</span>
<span class="c1"># Cloud Posse&#39;s standard configuration inputs suitable for passing</span>
<span class="c1"># to Cloud Posse modules.</span>
<span class="c1">#</span>
<span class="c1"># Modules should access the whole context as `module.this.context`</span>
<span class="c1"># to get the input variables with nulls for defaults,</span>
<span class="c1"># for example `context = module.this.context`,</span>
<span class="c1"># and access individual variables as `module.this.&lt;var&gt;`,</span>
<span class="c1"># with final values filled in.</span>
<span class="c1">#</span>
<span class="c1"># For example, when using defaults, `module.this.context.delimiter`</span>
<span class="c1"># will be null, and `module.this.delimiter` will be `-` (hyphen).</span>
<span class="c1">#</span>

<span class="kr">module</span> <span class="nv">&quot;this&quot;</span> <span class="p">{</span>
  <span class="na">source</span>  <span class="o">=</span> <span class="s2">&quot;cloudposse/label/null&quot;</span>
  <span class="na">version</span> <span class="o">=</span> <span class="s2">&quot;0.24.1&quot;</span><span class="c1"> # requires Terraform &gt;= 0.13.0</span>

  <span class="na">enabled</span>             <span class="o">=</span> <span class="nv">var.enabled</span>
  <span class="na">namespace</span>           <span class="o">=</span> <span class="nv">var.namespace</span>
  <span class="na">environment</span>         <span class="o">=</span> <span class="nv">var.environment</span>
  <span class="na">stage</span>               <span class="o">=</span> <span class="nv">var.stage</span>
  <span class="na">name</span>                <span class="o">=</span> <span class="nv">var.name</span>
  <span class="na">delimiter</span>           <span class="o">=</span> <span class="nv">var.delimiter</span>
  <span class="na">attributes</span>          <span class="o">=</span> <span class="nv">var.attributes</span>
  <span class="na">tags</span>                <span class="o">=</span> <span class="nv">var.tags</span>
  <span class="na">additional_tag_map</span>  <span class="o">=</span> <span class="nv">var.additional_tag_map</span>
  <span class="na">label_order</span>         <span class="o">=</span> <span class="nv">var.label_order</span>
  <span class="na">regex_replace_chars</span> <span class="o">=</span> <span class="nv">var.regex_replace_chars</span>
  <span class="na">id_length_limit</span>     <span class="o">=</span> <span class="nv">var.id_length_limit</span>
  <span class="na">label_key_case</span>      <span class="o">=</span> <span class="nv">var.label_key_case</span>
  <span class="na">label_value_case</span>    <span class="o">=</span> <span class="nv">var.label_value_case</span>

  <span class="na">context</span> <span class="o">=</span> <span class="nv">var.context</span>
<span class="p">}</span><span class="c1"></span>

<span class="c1"># Copy contents of cloudposse/terraform-null-label/variables.tf here</span>

<span class="kr">variable</span> <span class="nv">&quot;context&quot;</span> <span class="p">{</span>
  <span class="na">type</span> <span class="o">=</span> <span class="err">any</span>
  <span class="nb">default</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">enabled</span>             <span class="o">=</span> <span class="no">true</span>
    <span class="na">namespace</span>           <span class="o">=</span> <span class="kt">null</span>
    <span class="na">environment</span>         <span class="o">=</span> <span class="kt">null</span>
    <span class="na">stage</span>               <span class="o">=</span> <span class="kt">null</span>
    <span class="na">name</span>                <span class="o">=</span> <span class="kt">null</span>
    <span class="na">delimiter</span>           <span class="o">=</span> <span class="kt">null</span>
    <span class="na">attributes</span>          <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">tags</span>                <span class="o">=</span> <span class="p">{}</span>
    <span class="nb">additional_tag_map</span>  <span class="o">=</span> <span class="p">{}</span>
    <span class="na">regex_replace_chars</span> <span class="o">=</span> <span class="kt">null</span>
    <span class="na">label_order</span>         <span class="o">=</span> <span class="p">[]</span>
    <span class="na">id_length_limit</span>     <span class="o">=</span> <span class="kt">null</span>
    <span class="na">label_key_case</span>      <span class="o">=</span> <span class="kt">null</span>
    <span class="na">label_value_case</span>    <span class="o">=</span> <span class="kt">null</span>
  <span class="p">}</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">Single</span> <span class="kt">object</span> <span class="err">for</span> <span class="err">setting</span> <span class="err">entire</span> <span class="err">context</span> <span class="err">at</span> <span class="err">once</span><span class="p">.</span>
    <span class="err">See</span> <span class="err">description</span> <span class="err">of</span> <span class="err">individual</span> <span class="err">variables</span> <span class="err">for</span> <span class="err">details</span><span class="p">.</span>
    <span class="err">Leave</span> <span class="kt">string</span> <span class="err">and</span> <span class="err">numeric</span> <span class="err">variables</span> <span class="err">as</span> <span class="err">`</span><span class="kt">null</span><span class="err">`</span> <span class="err">to</span> <span class="err">use</span> <span class="err">default</span> <span class="err">value</span><span class="p">.</span>
    <span class="err">Individual</span> <span class="kr">variable</span> <span class="err">settings (non-null) override settings in context object,</span>
    <span class="err">except</span> <span class="err">for</span> <span class="err">attributes</span><span class="p">,</span> <span class="err">tags</span><span class="p">,</span> <span class="err">and</span> <span class="err">additional_tag_map</span><span class="p">,</span> <span class="err">which</span> <span class="err">are</span> <span class="err">merged</span><span class="p">.</span>
  <span class="err">EOT</span>

  <span class="nb">validation</span> <span class="p">{</span>
    <span class="na">condition</span>     <span class="o">=</span> <span class="nf">lookup</span><span class="p">(</span><span class="nv">var.context</span><span class="p">,</span> <span class="s2">&quot;label_key_case&quot;, null) == null ? true : contains([&quot;lower&quot;, &quot;title&quot;, &quot;upper&quot;], var.context[&quot;label_key_case&quot;</span><span class="p">])</span>
    <span class="na">error_message</span> <span class="o">=</span> <span class="s2">&quot;Allowed values: `lower`, `title`, `upper`.&quot;</span>
  <span class="p">}</span>

  <span class="nb">validation</span> <span class="p">{</span>
    <span class="na">condition</span>     <span class="o">=</span> <span class="nf">lookup</span><span class="p">(</span><span class="nv">var.context</span><span class="p">,</span> <span class="s2">&quot;label_value_case&quot;, null) == null ? true : contains([&quot;lower&quot;, &quot;title&quot;, &quot;upper&quot;, &quot;none&quot;], var.context[&quot;label_value_case&quot;</span><span class="p">])</span>
    <span class="na">error_message</span> <span class="o">=</span> <span class="s2">&quot;Allowed values: `lower`, `title`, `upper`, `none`.&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;enabled&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">bool</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Set to false to prevent the module from creating any resources&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;namespace&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Namespace, which could be your organization name or abbreviation, e.g. &#39;eg&#39; or &#39;cp&#39;&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;environment&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Environment, e.g. &#39;uw2&#39;, &#39;us-west-2&#39;, OR &#39;prod&#39;, &#39;staging&#39;, &#39;dev&#39;, &#39;UAT&#39;&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;stage&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Stage, e.g. &#39;prod&#39;, &#39;staging&#39;, &#39;dev&#39;, OR &#39;source&#39;, &#39;build&#39;, &#39;test&#39;, &#39;deploy&#39;, &#39;release&#39;&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;name&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Solution name, e.g. &#39;app&#39; or &#39;jenkins&#39;&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;delimiter&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">Delimiter</span> <span class="err">to</span> <span class="err">be</span> <span class="err">used</span> <span class="err">between</span> <span class="err">`namespace`</span><span class="p">,</span> <span class="err">`environment`</span><span class="p">,</span> <span class="err">`stage`</span><span class="p">,</span> <span class="err">`name`</span> <span class="err">and</span> <span class="err">`attributes`</span><span class="p">.</span>
    <span class="err">Defaults</span> <span class="err">to</span> <span class="err">`-`</span> <span class="p">(</span><span class="err">hyphen</span><span class="p">).</span> <span class="err">Set</span> <span class="err">to</span> <span class="err">`</span><span class="s2">&quot;&quot;</span><span class="err">`</span> <span class="err">to</span> <span class="err">use</span> <span class="err">no</span> <span class="err">delimiter</span> <span class="err">at</span> <span class="err">all</span><span class="p">.</span>
  <span class="err">EOT</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;attributes&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="p">[]</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Additional attributes (e.g. `1`)&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;tags&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
  <span class="nb">default</span>     <span class="o">=</span> <span class="p">{}</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Additional tags (e.g. `map(&#39;BusinessUnit&#39;,&#39;XYZ&#39;)`&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;additional_tag_map&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
  <span class="nb">default</span>     <span class="o">=</span> <span class="p">{}</span>
  <span class="na">description</span> <span class="o">=</span> <span class="s2">&quot;Additional tags for appending to tags_as_list_of_maps. Not added to `tags`.&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;label_order&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">The</span> <span class="err">naming</span> <span class="err">order</span> <span class="err">of</span> <span class="err">the</span> <span class="err">id</span> <span class="kr">output</span> <span class="err">and Name tag.</span>
    <span class="err">Defaults</span> <span class="err">to</span> <span class="p">[</span><span class="s2">&quot;namespace&quot;, &quot;environment&quot;, &quot;stage&quot;, &quot;name&quot;, &quot;attributes&quot;</span><span class="p">].</span>
    <span class="err">You</span> <span class="err">can</span> <span class="err">omit</span> <span class="err">any</span> <span class="err">of</span> <span class="err">the</span> <span class="m">5</span> <span class="err">elements</span><span class="p">,</span> <span class="err">but</span> <span class="err">at</span> <span class="err">least</span> <span class="err">one</span> <span class="err">must</span> <span class="err">be</span> <span class="err">present</span><span class="p">.</span>
  <span class="err">EOT</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;regex_replace_chars&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">Regex</span> <span class="err">to</span> <span class="err">replace</span> <span class="err">chars</span> <span class="err">with</span> <span class="err">empty</span> <span class="kt">string</span> <span class="err">in</span> <span class="err">`namespace`</span><span class="p">,</span> <span class="err">`environment`</span><span class="p">,</span> <span class="err">`stage`</span> <span class="err">and</span> <span class="err">`name`</span><span class="p">.</span>
    <span class="err">If</span> <span class="err">not</span> <span class="err">set</span><span class="p">,</span> <span class="err">`</span><span class="s2">&quot;/[^a-zA-Z0-9-]/&quot;</span><span class="err">`</span> <span class="err">is</span> <span class="err">used</span> <span class="err">to</span> <span class="err">remove</span> <span class="err">all</span> <span class="err">characters</span> <span class="err">other</span> <span class="err">than</span> <span class="err">hyphens</span><span class="p">,</span> <span class="err">letters</span> <span class="err">and</span> <span class="err">digits</span><span class="p">.</span>
  <span class="err">EOT</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;id_length_limit&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">number</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">Limit</span> <span class="err">`id`</span> <span class="err">to</span> <span class="err">this</span> <span class="err">many</span> <span class="err">characters</span> <span class="p">(</span><span class="err">minimum</span> <span class="m">6</span><span class="p">).</span>
    <span class="err">Set</span> <span class="err">to</span> <span class="err">`</span><span class="m">0</span><span class="err">`</span> <span class="err">for</span> <span class="err">unlimited</span> <span class="err">length</span><span class="p">.</span>
    <span class="err">Set</span> <span class="err">to</span> <span class="err">`</span><span class="kt">null</span><span class="err">`</span> <span class="err">for</span> <span class="err">default</span><span class="p">,</span> <span class="err">which</span> <span class="err">is</span> <span class="err">`</span><span class="m">0</span><span class="err">`</span><span class="p">.</span>
    <span class="err">Does</span> <span class="err">not</span> <span class="err">affect</span> <span class="err">`id_full`</span><span class="p">.</span>
  <span class="err">EOT</span>
  <span class="nb">validation</span> <span class="p">{</span>
    <span class="na">condition</span>     <span class="o">=</span> <span class="nv">var.id_length_limit</span> <span class="p">==</span> <span class="kt">null</span> <span class="p">?</span> <span class="no">true</span> <span class="p">:</span> <span class="nv">var.id_length_limit</span> <span class="err">&gt;</span><span class="p">=</span> <span class="m">6</span> <span class="err">||</span> <span class="nv">var.id_length_limit</span> <span class="p">==</span> <span class="m">0</span>
    <span class="na">error_message</span> <span class="o">=</span> <span class="s2">&quot;The id_length_limit must be &gt;= 6 if supplied (not null), or 0 for unlimited length.&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;label_key_case&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">The</span> <span class="err">letter</span> <span class="err">case</span> <span class="err">of</span> <span class="err">label</span> <span class="err">keys</span> <span class="p">(</span><span class="err">`tag`</span> <span class="err">names</span><span class="p">)</span> <span class="p">(</span><span class="nv">i.e</span><span class="p">.</span> <span class="err">`name`</span><span class="p">,</span> <span class="err">`namespace`</span><span class="p">,</span> <span class="err">`environment`</span><span class="p">,</span> <span class="err">`stage`</span><span class="p">,</span> <span class="err">`attributes`</span><span class="p">)</span> <span class="err">to</span> <span class="err">use</span> <span class="err">in</span> <span class="err">`tags`</span><span class="p">.</span>
    <span class="err">Possible</span> <span class="err">values</span><span class="p">:</span> <span class="err">`lower`</span><span class="p">,</span> <span class="err">`title`</span><span class="p">,</span> <span class="err">`upper`</span><span class="p">.</span>
    <span class="err">Default</span> <span class="err">value</span><span class="p">:</span> <span class="err">`title`</span><span class="p">.</span>
  <span class="err">EOT</span>

  <span class="nb">validation</span> <span class="p">{</span>
    <span class="na">condition</span>     <span class="o">=</span> <span class="nv">var.label_key_case</span> <span class="p">==</span> <span class="kt">null</span> <span class="p">?</span> <span class="no">true</span> <span class="p">:</span> <span class="nf">contains</span><span class="p">([</span><span class="s2">&quot;lower&quot;, &quot;title&quot;, &quot;upper&quot;</span><span class="p">],</span> <span class="nv">var.label_key_case</span><span class="p">)</span>
    <span class="na">error_message</span> <span class="o">=</span> <span class="s2">&quot;Allowed values: `lower`, `title`, `upper`.&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">variable</span> <span class="nv">&quot;label_value_case&quot;</span> <span class="p">{</span>
  <span class="na">type</span>        <span class="o">=</span> <span class="kt">string</span>
  <span class="na">default</span>     <span class="o">=</span> <span class="kt">null</span>
  <span class="na">description</span> <span class="o">=</span> <span class="err">&lt;&lt;-EOT</span>
    <span class="err">The</span> <span class="err">letter</span> <span class="err">case</span> <span class="err">of</span> <span class="kr">output</span> <span class="err">label values (also used in `tags` and `id`).</span>
    <span class="err">Possible</span> <span class="err">values</span><span class="p">:</span> <span class="err">`lower`</span><span class="p">,</span> <span class="err">`title`</span><span class="p">,</span> <span class="err">`upper`</span> <span class="err">and</span> <span class="err">`none`</span> <span class="p">(</span><span class="err">no</span> <span class="err">transformation</span><span class="p">).</span>
    <span class="err">Default</span> <span class="err">value</span><span class="p">:</span> <span class="err">`lower`</span><span class="p">.</span>
  <span class="err">EOT</span>

  <span class="nb">validation</span> <span class="p">{</span>
    <span class="na">condition</span>     <span class="o">=</span> <span class="nv">var.label_value_case</span> <span class="p">==</span> <span class="kt">null</span> <span class="p">?</span> <span class="no">true</span> <span class="p">:</span> <span class="nf">contains</span><span class="p">([</span><span class="s2">&quot;lower&quot;, &quot;title&quot;, &quot;upper&quot;, &quot;none&quot;</span><span class="p">],</span> <span class="nv">var.label_value_case</span><span class="p">)</span>
    <span class="na">error_message</span> <span class="o">=</span> <span class="s2">&quot;Allowed values: `lower`, `title`, `upper`, `none`.&quot;</span>
  <span class="p">}</span>
<span class="p">}</span><span class="c1"></span>
<span class="c1">#### End of copy of cloudposse/terraform-null-label/variables.tf</span>
</pre></div>
